rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // User Portfolios Collection
    match /portfolios/{userId} {
      // 1. Ownership: Users can only write to their own document (matches their Auth UID)
      allow write: if request.auth != null && request.auth.uid == userId;
      
      // 2. Read Access:
      // - The owner can always read their own data.
      // - Public users can read ANY portfolio. 
      // (Since this is a portfolio site, profiles are inherently public content).
      allow read: if true;
    }
  }
}
